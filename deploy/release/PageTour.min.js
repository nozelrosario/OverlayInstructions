/*! PageTour - v0.0.1 - 2014-04-04 */function intersection(a,b){a.sort(),b.sort();for(var c=j=0,d=[];c<a.length&&j<b.length;)a[c]<b[j]?c++:b[j]<a[c]?j++:(d.push(c),c++,j++);return d}function InstructionLink(a){"use strict";this.constructor(a)}function InstructionsList(){"use strict";this.constructor()}function TargetElement(a){"use strict";this.constructor(a)}function OverlayInstructions(a){"use strict";this.constructor(a),this.fireEvent("onInitialized")}function PageTour(a){"use strict";this.constructor(a)}!function(a){a.fn.invisible=function(){return this.each(function(){a(this).css("visibility","hidden")})},a.fn.visible=function(){return this.each(function(){a(this).css("visibility","visible")})}}(jQuery),$.fn.rotate=function(a){var b=$(this);b.css({"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)"})},function(a){a.fn.addBack=a.fn.addBack||a.fn.andSelf,a.fn.extend({actual:function(b,c){if(!this[b])throw'$.actual => The jQuery method "'+b+'" you called does not exist';var d,e,f={absolute:!1,clone:!1,includeMargin:!1},g=a.extend(f,c),h=this.eq(0);if(g.clone===!0)d=function(){var a="position: absolute !important; top: -1000 !important; ";h=h.clone().attr("style",a).appendTo("body")},e=function(){h.remove()};else{var i,j=[],k="";d=function(){i=h.parents().addBack().filter(":hidden"),k+="visibility: hidden !important; display: block !important; ",g.absolute===!0&&(k+="position: absolute !important; "),i.each(function(){var b=a(this);j.push(b.attr("style")),b.attr("style",k)})},e=function(){i.each(function(b){var c=a(this),d=j[b];void 0===d?c.removeAttr("style"):c.attr("style",d)})}}d();var l=/(outer)/.test(b)?h[b](g.includeMargin):h[b]();return e(),l}})}(jQuery),InstructionLink.prototype.constructor=function(a){"use strict";this.InstructionObject=a,this.ID=a.getID(),this.nextInstruction=null,this.previousInstruction=null,this.index=null},InstructionsList.prototype.constructor=function(){"use strict";this.firstInstruction=null,this.lastInstruction=null,this.size=0},InstructionsList.prototype.getFirstInstruction=function(){"use strict";return this.firstInstruction},InstructionsList.prototype.getLastInstruction=function(){"use strict";return this.lastInstruction},InstructionsList.prototype.getSize=function(){"use strict";return this.size},InstructionsList.prototype.add=function(a){"use strict";var b=new InstructionLink(a);b.InstructionObject=a,null===this.firstInstruction?(this.firstInstruction=b,this.lastInstruction=b):(this.lastInstruction.nextInstruction=b,b.previousInstruction=this.lastInstruction,this.lastInstruction=b),this.size=this.size+1},InstructionsList.prototype.addAfter=function(){"use strict"},InstructionsList.prototype.remove=function(a){"use strict";var b=this.firstInstruction;if(0!==this.size){var c=!1;if(a===b.ID)return null===b.nextInstruction?(this.firstInstruction.InstructionObject=null,this.firstInstruction=null,this.lastInstruction=null,void(this.size=this.size-1)):(b.InstructionObject=null,b=b.nextInstruction,b.previousInstruction=null,this.firstInstruction=b,void(this.size=this.size-1));for(;;){if(null===b){c=!1;break}var d=b.nextInstruction;if(null!==d&&a===d.ID){var e=d.nextInstruction;b.nextInstruction=e,e.previousInstruction=b.nextInstruction,d=null,c=!0;break}b=b.nextInstruction}c&&(this.size=this.size-1)}},InstructionsList.prototype.find=function(a){"use strict";var b=this.firstInstruction;if(0===this.size)return null;if(a===b.ID)return b;for(;;){if(null===b)return null;var c=b.nextInstruction;if(null!==c&&a===c.ID)return c;b=b.nextInstruction}},TargetElement.prototype.ID="",TargetElement.prototype.Widget="",TargetElement.prototype.constructor=function(a){"use strict";a?(this.ID=a,this.Widget=$("#"+this.ID),this.Widget.length<=0&&alert("Target element with ID='"+a+"' not found on page")):alert("Target Cannot be Empty")},TargetElement.prototype.getPositionX1=function(){"use strict";var a=this.Widget.offset();return a.left},TargetElement.prototype.getPositionX2=function(){"use strict";return this.getPositionX1()+this.getWidth()},TargetElement.prototype.getPositionY1=function(){"use strict";var a=this.Widget.offset();return a.top},TargetElement.prototype.getPositionY2=function(){"use strict";return this.getPositionY1()+this.getHeight()},TargetElement.prototype.getWidth=function(){"use strict";return this.Widget.actual("width")},TargetElement.prototype.getHeight=function(){"use strict";return this.Widget.actual("height")},OverlayInstructions.prototype.ControlID="",OverlayInstructions.prototype.targetElement="",OverlayInstructions.prototype.InstructionPositionFixed=!1,OverlayInstructions.prototype.InstructionPositionX="",OverlayInstructions.prototype.InstructionPositionY="",OverlayInstructions.prototype.deltaX=5,OverlayInstructions.prototype.deltaY=5,OverlayInstructions.prototype.InstructionBlockElment=null,OverlayInstructions.prototype.InstructionOverlay=null,OverlayInstructions.prototype.arrowPositionFixed=!1,OverlayInstructions.prototype.arrowPosition="W",OverlayInstructions.prototype.arrowsActive={E:!1,W:!1,S:!1,N:!1,NE:!1,NW:!1,SE:!1,SW:!1},OverlayInstructions.prototype.arrowImage="",OverlayInstructions.prototype.horizontalArrowImageHeight=75,OverlayInstructions.prototype.horizontalArrowImageWidth=150,OverlayInstructions.prototype.verticalArrowImageHeight=140,OverlayInstructions.prototype.verticalArrowImageWidth=75,OverlayInstructions.prototype.arrowImageRotationAngle=0,OverlayInstructions.prototype.arrowImageRotationFixed=!1,OverlayInstructions.prototype.instructionBlockTheme="ChalkBoard",OverlayInstructions.prototype.__Is_Rendered_Within_Tour__=!1,OverlayInstructions.prototype.__Is_Active__=!1,OverlayInstructions.prototype.arrowStyles={E:"arrowImages/arrow-E.png",W:"arrowImages/arrow-W.png",S:"arrowImages/arrow-S.png",N:"arrowImages/arrow-N.png",NE:"arrowImages/arrow-NE.png",NW:"arrowImages/arrow-NW.png",SE:"arrowImages/arrow-SE.png",SW:"arrowImages/arrow-SW.png"},OverlayInstructions.prototype.InstructionText="",OverlayInstructions.prototype.InstructionDetailsText="",OverlayInstructions.prototype.events={},OverlayInstructions.prototype.constructor=function(a){"use strict";if(this.validateArguments(a.ID,a.InstructionString,a.InstructionDetailsString,a.targetID,a.arrowImagePosition,a.arrowImageURL,a.posX,a.posY)){this.ControlID=a.ID,this.targetElement=a.targetID?new TargetElement(a.targetID):"",this.InstructionText=a.InstructionString,this.InstructionDetailsText=a.InstructionDetailsString,this.createInstructionBlockElement(),this.createOverlay(),a.arrowImagePosition&&this.isValidArrowPosition(a.arrowImagePosition)?(this.setArrowPosition(a.arrowImagePosition),this.arrowPositionFixed=!0,a.arrowImageURL&&this.setArrowImage(a.arrowImageURL)):this.autoSetArrowPosition(),a.posX&&a.posY?(this.InstructionPositionFixed=!0,this.InstructionPositionX=a.posX,this.InstructionPositionY=a.posY):this.InstructionPositionFixed=!1,a.arrowImageRotationAngle?(this.arrowImageRotationFixed=!0,this.arrowImageRotationAngle=a.arrowImageRotationAngle):this.arrowImageRotationFixed=!1,this.showArrow(this.getArrowPosition(),!1);var b={OverlayInstructionObj:this};if($("#InstructionOKButton_"+this.ControlID).on("click",b,this.OnInstructionOKButtonClick),$("#MoreDetailButton_"+this.ControlID).on("click",b,this.ToggleMoreDetail),a.expandDetails&&this.ToggleMoreDetail({data:b}),a.additionalArrows)for(var c=0;c<a.additionalArrows.length;c++)this.isValidArrowPosition(a.additionalArrows[c])&&this.showArrow(a.additionalArrows[c],!0)}this.events={__on_show_next_instruction__:!0,onOkClick:!0,onInitialized:!0,onShow:!0,onHide:!0},this.__Is_Active__=!1;var d=this;$(window).on("resize",function(){d.__Is_Active__&&d.refreshInstructionBlockPosition()})},OverlayInstructions.prototype.ToggleMoreDetail=function(a){"use strict";var b=a.data.OverlayInstructionObj;$("#MoreInstructionDetail_"+b.ControlID).is(":visible")?($("#MoreDetailButton_"+b.ControlID).text("more..."),$("#MoreInstructionDetail_"+b.ControlID).css("display","none")):($("#MoreDetailButton_"+b.ControlID).text("less..."),$("#MoreInstructionDetail_"+b.ControlID).css("display","block")),b.refreshInstructionBlockPosition()},OverlayInstructions.prototype.OnInstructionOKButtonClick=function(a){"use strict";var b=a.data.OverlayInstructionObj;b.hide(),b.fireEvent("onOkClick")},OverlayInstructions.prototype.addEventListener=function(a,b){"use strict";this.events[a]&&(this.events[a]=b)},OverlayInstructions.prototype.removeEventListener=function(a){"use strict";this.events[a]&&(this.events[a]=!0)},OverlayInstructions.prototype.fireEvent=function(a,b){"use strict";"function"==typeof this.events[a]&&this.events[a].apply(this,b)},OverlayInstructions.prototype.hideOverlay=function(){"use strict";var a=this.getOverlay();a.css("display","none")},OverlayInstructions.prototype.showOverlay=function(){"use strict";var a=this.getOverlay();a.css("display","block")},OverlayInstructions.prototype.getID=function(){"use strict";return this.ControlID},OverlayInstructions.prototype.getOverlay=function(){"use strict";var a;return a=this.InstructionOverlay?this.InstructionOverlay:this.createOverlay()},OverlayInstructions.prototype.resizeOverlay=function(){var a=this.getOverlay();a.height($(document).height()-1),a.width($(document).width()-1)},OverlayInstructions.prototype.__reducePageTourOverlayOpacity=function(){},OverlayInstructions.prototype.createOverlay=function(){"use strict";var a=$("#InstructionsOverlay_"+this.ControlID);return a.length<=0&&(a=$('<div class="InstructionsOverlay" id="InstructionsOverlay_'+this.ControlID+'" style="display:none; height:'+$(document).height()+"px; width:"+$(document).width()+'px;"></div>'),$("body").append(a)),this.InstructionOverlay=a,a},OverlayInstructions.prototype.getInstructionBlockElement=function(){"use strict";return this.InstructionBlockElment||this.createInstructionBlockElement(),this.InstructionBlockElment},OverlayInstructions.prototype.autoSetArrowPosition=function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k=30;if(this.targetElement){a=this.targetElement.getPositionX1(),c=this.targetElement.getPositionY1(),e=this.targetElement.getWidth(),f=this.targetElement.getHeight(),b=this.targetElement.getPositionX2(),d=this.targetElement.getPositionY2(),g=$(window).height(),h=$(window).width();var l=$("#Cell-C_"+this.ControlID);i=l.actual("height"),j=l.actual("width");var m,n;m=this.horizontalArrowImageHeight>i?this.horizontalArrowImageHeight:i,n=this.horizontalArrowImageWidth+j;var o,p;o=this.verticalArrowImageHeight+i,p=this.verticalArrowImageWidth>j?this.verticalArrowImageWidth:j,h>b+n?this.setArrowPosition(d>m?"SW":d>m/2?"W":"NW"):a>=n+k?this.setArrowPosition(c>m?"SE":c>m/2?"E":"NE"):c>=o+k?this.setArrowPosition(a>p?"SE":a>p/2?"S":"SW"):g>d+o&&this.setArrowPosition(a>p?"NE":a>p/2?"N":"NW")}else this.setArrowPosition("NW")},OverlayInstructions.prototype.setArrowPosition=function(a){this.arrowPosition=a,this.arrowsActive[a]=!0},OverlayInstructions.prototype.getArrowPosition=function(){return this.arrowPosition},OverlayInstructions.prototype.calculateInstructionBlockCoOrdinates=function(a){"use strict";var b,c,d;if(this.isValidArrowPosition(a)){var e,f,g,h,i,j;e=this.targetElement.getPositionX1(),g=this.targetElement.getPositionY1(),i=this.targetElement.getWidth(),j=this.targetElement.getHeight(),f=this.targetElement.getPositionX2(),h=this.targetElement.getPositionY2();var k,l,m=$("#Cell-C_"+this.ControlID),n=m.actual("height"),o=m.actual("width");k=this.horizontalArrowImageHeight>n?this.horizontalArrowImageHeight:n,l=this.horizontalArrowImageWidth+o;var p,q;switch(p=this.verticalArrowImageHeight+n,q=this.verticalArrowImageWidth>o?this.verticalArrowImageWidth:o,a){case"NW":b=f+this.deltaX,c=h+this.deltaY,d=0;break;case"N":b=e+(f-e)/2+this.deltaX-q/2,c=h+this.deltaY,d=0;break;case"NE":b=e-(l+this.deltaX),c=g+this.deltaY,d=0;break;case"E":b=e-(l+this.deltaX),c=g+(h-g)/2-this.deltaY-(k-2*this.deltaX)/2,d=0;break;case"SE":b=e-i/2-(q+this.deltaX),c=g-(p+this.deltaY),d=0;break;case"S":b=e+(f-e)/2-(q/2+this.deltaX),c=g-(p+j+this.deltaY),d=0;break;case"SW":b=f+this.deltaX,c=g+this.deltaY-p,d=0;break;case"W":b=f+this.deltaX,c=g+this.deltaY-(k-2*this.deltaX)/2,d=0;break;default:b=0,c=0,d=0}}else b=0,c=0,d=0;this.InstructionPositionX=0>b?0:b,this.InstructionPositionY=0>c?0:c,this.setArrowImageRotationAngle(d)},OverlayInstructions.prototype.refreshInstructionBlockPosition=function(){"use strict";!this.InstructionPositionFixed&&this.targetElement&&this.calculateInstructionBlockCoOrdinates(this.getArrowPosition()),this.setPosition(this.InstructionPositionX,this.InstructionPositionY),this.resizeOverlay()},OverlayInstructions.prototype.getObsoleteArrowPositions=function(a){var b=[];switch(a){case"NW":b=["N","NE","E","SE","S","SW","W"];break;case"N":b=["NW","NE","E","SE","S","SW","W"];break;case"NE":b=["NW","E","SE","S","SW","W"];break;case"E":b=["NW","N","NE","SE","S","SW","W"];break;case"SE":b=["NW","N","NE","E","SW","W"];break;case"S":b=["NW","N","NE","E","SE","SW","W"];break;case"SW":b=["NW","N","NE","E","SE","S","W"];break;case"W":b=["NW","N","NE","E","SE","S","SW"];break;default:b=["NW","N","NE","E","SE","S","SW","W"]}return b},OverlayInstructions.prototype.getAllObsoleteArrowPositions=function(){var a,b;for(a in this.arrowsActive)this.arrowsActive.hasOwnProperty(a)&&this.arrowsActive[a]===!0&&(b=b?intersection(b,this.getObsoleteArrowPositions(a)):this.getObsoleteArrowPositions(a));return b},OverlayInstructions.prototype.hideArrowCells=function(a){var b;for(b=0;b<a.length;b++)$("#Cell-"+a[b]+"_"+this.ControlID).css("display","none")},OverlayInstructions.prototype.hideUnWantedCells=function(){"use strict";var a,b;if(!this.InstructionPositionFixed){for(a in this.arrowsActive)this.arrowsActive.hasOwnProperty(a)&&$("#Cell-"+a+"_"+this.ControlID).css("display","table-cell");b=this.getAllObsoleteArrowPositions(),this.hideArrowCells(b)}},OverlayInstructions.prototype.setPosition=function(a,b){"use strict";$("#InstructionBlock_"+this.ControlID).css("top",b),$("#InstructionBlock_"+this.ControlID).css("left",a)},OverlayInstructions.prototype.show=function(a){"use strict";this.__Is_Active__||(this.showOverlay(),this.setArrowImageRotationAngle(),this.refreshInstructionBlockPosition(),$("#InstructionBlock_"+this.ControlID).show(),this.__Is_Active__=!0,a&&(this.__Is_Rendered_Within_Tour__=a===!0?!0:!1),this.resizeOverlay(),this.scrollToInstruction(),this.fireEvent("onShow"))},OverlayInstructions.prototype.scrollToInstruction=function(){var a=this.getID();topPadding=100;var b=$("#InstructionBlock_"+a).offset().top-topPadding;$("html, body").stop().animate({scrollTop:b},1e3)},OverlayInstructions.prototype.destroy=function(){"use strict";$("#InstructionOKButton_"+this.ControlID).off("click"),$("#MoreDetailButton_"+this.ControlID).off("click"),$("#InstructionBlock_"+this.ControlID).remove(),this.getOverlay().remove(),this.removeEventListener("onOkClick"),this.removeEventListener("onInitialized"),this.removeEventListener("onShow"),this.removeEventListener("onHide")},OverlayInstructions.prototype.hide=function(){"use strict";this.__Is_Active__&&(this.hideOverlay(),$("#InstructionBlock_"+this.ControlID).hide(),this.__Is_Active__=!1,this.fireEvent("onHide"),this.__Is_Rendered_Within_Tour__&&this.fireEvent("__on_show_next_instruction__"),this.__Is_Rendered_Within_Tour__=!1)},OverlayInstructions.prototype.setTheme=function(a){"use strict";this.instructionBlockTheme&&$("#InstructionBlock_"+this.ControlID).removeClass(this.instructionBlockTheme),a&&$("#InstructionBlock_"+this.ControlID).addClass(a)},OverlayInstructions.prototype.hideAllArrows=function(){"use strict";var a;for(a in this.arrowStyles)this.arrowStyles.hasOwnProperty(a)&&(this.arrowsActive[a]=!1,$("#Cell-"+a+"_"+this.ControlID).invisible())},OverlayInstructions.prototype.showArrow=function(a,b){"use strict";this.getArrowPosition();a&&this.isValidArrowPosition(a)&&(b||(this.hideAllArrows(),this.setArrowPosition(a)),$("#Cell-"+a+"_"+this.ControlID).visible(),this.arrowsActive[a]=!0,this.hideUnWantedCells())},OverlayInstructions.prototype.setArrowImageRotationAngle=function(a,b){"use strict";a&&!this.arrowImageRotationFixed&&(this.arrowImageRotationAngle=a),b&&this.isValidArrowPosition(b)?this.rotateArrowImage(this.arrowImageRotationAngle,b):this.rotateArrowImage(this.arrowImageRotationAngle,this.getArrowPosition())},OverlayInstructions.prototype.rotateArrowImage=function(a,b){"use strict";a&&b&&$("#ArrowImage_"+b+"_Div_"+this.ControlID).rotate(a)},OverlayInstructions.prototype.setArrowImage=function(a,b){"use strict";b&&this.isValidArrowPosition(b)&&a?($("#ArrowImage_"+b+"_Div_"+this.ControlID).css("background-image",a),this.arrowStyles[b]=a):a&&($("#ArrowImage_"+this.getArrowPosition()+"_Div_"+this.ControlID).css("background-image",a),this.arrowStyles[this.getArrowPosition()]=a)},OverlayInstructions.prototype.validateArguments=function(a,b,c,d,e,f,g,h){"use strict";return a?(b||c||console.log("Warning : Instruction text is empty, no content to render"),d&&e&&g&&h&&f&&console.log("Warning : Positioning arguments defaultes, Target element position will be ignored."),d||(g||h||console.log("Warning : (X,Y) is empty, defaults(0,0) will be applied."),e||console.log("Warning : Default arrow position of 'NW' will be applied")),f&&!e?(console.log("Error : Arrow position is required for applying custom arrow image."),!1):!0):(console.log("Error : ID cannot be Empty"),!1)},OverlayInstructions.prototype.isValidArrowPosition=function(a){"use strict";var b;return a&&"E"!==a&&"W"!==a&&"S"!==a&&"N"!==a&&"NE"!==a&&"NW"!==a&&"SE"!==a&&"SW"!==a?(alert("Incorrect arrow position. Shoud be one of [ E,W,S,N,NE,NW,SE,SW ]"),b=!1):b=!0,b},OverlayInstructions.prototype.createInstructionBlockElement=function(){"use strict";var a=$('<table id="InstructionBlock_'+this.ControlID+'" class="InstructionBlock '+this.instructionBlockTheme+'" style="display:none"></table>'),b=$('<tr id="TopRow_'+this.ControlID+'"></tr>'),c=$('<tr id="MiddleRow_'+this.ControlID+'"></tr>'),d=$('<tr id="BottomRow_'+this.ControlID+'"></tr>'),e=$('<td id="Cell-NW_'+this.ControlID+'" class="ArrowImageCell ArrowImageCell_NW" style="visibility:hidden"><div class="ArrowImage ArrowImage_NW" id="ArrowImage_NW_Div_'+this.ControlID+'" style="height:'+this.verticalArrowImageHeight+"px;width:"+this.horizontalArrowImageWidth+'px;"></div></td>'),f=$('<td id="Cell-N_'+this.ControlID+'" class="ArrowImageCell ArrowImageCell_N" style="visibility:hidden"><div class="ArrowImage ArrowImage_N" id="ArrowImage_N_Div_'+this.ControlID+'" style="height:'+this.verticalArrowImageHeight+"px;width:"+this.verticalArrowImageWidth+'px;"></div></td>'),g=$('<td id="Cell-NE_'+this.ControlID+'" class="ArrowImageCell ArrowImageCell_NE" style="visibility:hidden"><div class="ArrowImage ArrowImage_NE" id="ArrowImage_NE_Div_'+this.ControlID+'" style="height:'+this.verticalArrowImageHeight+"px;width:"+this.horizontalArrowImageWidth+'px;"></div></td>'),h=$('<td id="Cell-W_'+this.ControlID+'" class="ArrowImageCell ArrowImageCell_W" style="visibility:hidden"><div class="ArrowImage ArrowImage_W" id="ArrowImage_W_Div_'+this.ControlID+'" style="height:'+this.horizontalArrowImageHeight+"px;width:"+this.horizontalArrowImageWidth+'px;"></div></td>'),i=$('<td id="Cell-E_'+this.ControlID+'" class="ArrowImageCell ArrowImageCell_E" style="visibility:hidden"><div class="ArrowImage ArrowImage_E" id="ArrowImage_E_Div_'+this.ControlID+'" style="height:'+this.horizontalArrowImageHeight+"px;width:"+this.horizontalArrowImageWidth+'px;"></div></td>'),j=$('<td id="Cell-SW_'+this.ControlID+'" class="ArrowImageCell ArrowImageCell_SW" style="visibility:hidden"><div class="ArrowImage ArrowImage_SW" id="ArrowImage_SW_Div_'+this.ControlID+'" style="height:'+this.verticalArrowImageHeight+"px;width:"+this.horizontalArrowImageWidth+'px;"></div></td>'),k=$('<td id="Cell-SE_'+this.ControlID+'" class="ArrowImageCell ArrowImageCell_SE" style="visibility:hidden"><div class="ArrowImage ArrowImage_SE" id="ArrowImage_SE_Div_'+this.ControlID+'" style="height:'+this.verticalArrowImageHeight+"px;width:"+this.horizontalArrowImageWidth+'px;"></div></td>'),l=$('<td id="Cell-S_'+this.ControlID+'" class="ArrowImageCell ArrowImageCell_S" style="visibility:hidden"><div class="ArrowImage ArrowImage_S" id="ArrowImage_S_Div_'+this.ControlID+'" style="height:'+this.verticalArrowImageHeight+"px;width:"+this.verticalArrowImageWidth+'px;"></div></td>'),m=$('<td id="Cell-C_'+this.ControlID+'"></td>'),n=$('<div class="InstructionContent" id="InstructionContent_'+this.ControlID+'"></div>'),o=$('<div class="InstructionText" id="InstructionText_'+this.ControlID+'"> <span>'+this.InstructionText+"</span> </div>"),p=$('<div class="InstructionOKButtonHolder" id="InstructionOKButtonHolder_'+this.ControlID+'"><a class="InstructionOKButton" id="InstructionOKButton_'+this.ControlID+'">OK</a></div>');if(n.append(o),this.InstructionDetailsText){var q=$('<br/><a class="MoreDetailButton" id="MoreDetailButton_'+this.ControlID+'" href="#">more...</a>'),r=$('<div class="InstructionDetailText" id="InstructionDetailText_'+this.ControlID+'">'+this.InstructionDetailsText+"</div>"),s=$('<div class="MoreInstructionDetail" id="MoreInstructionDetail_'+this.ControlID+'" style="display:none"></div>');n.append(q),s.append(r),n.append(s)}return m.append(n),m.append(p),b.append(e),b.append(f),b.append(g),c.append(h),c.append(m),c.append(i),d.append(j),d.append(l),d.append(k),a.append(b),a.append(c),a.append(d),this.InstructionBlockElment=a,$("body").append(a),a},PageTour.prototype.constructor=function(a){"use strict";if(a){this.name=a,this.instructionTargets={},this.createOverlay(),this.createNavigationButtons();var b=this;$(window).on("resize",function(){b.__Is_Active__&&b.refreshPageTourLayout()})}else alert("Page Tour name cannot be empty!!")},PageTour.prototype.name="",PageTour.prototype.instructionBlockTheme="ChalkBoard",PageTour.prototype.instructionTargets=null,PageTour.prototype.tourNavigationButtons=null,PageTour.prototype.pageTourOverlay=null,PageTour.prototype.pageInstructionsList=null,PageTour.prototype.currentActiveInstruction=null,PageTour.prototype.__blockNextInstruction=!1,PageTour.prototype.__Is_Active__=!1,PageTour.prototype.getPageInstructionsList=function(){"use strict";return this.pageInstructionsList||(this.pageInstructionsList=new InstructionsList),this.pageInstructionsList},PageTour.prototype.play=function(){"use strict";if(this.currentActiveInstruction)this.currentActiveInstruction.InstructionObject.show(!0);else{var a=this.getPageInstructionsList().getFirstInstruction();a&&(this.currentActiveInstruction=a,a.InstructionObject.show(!0),this.disableButton("PreviousButton"),this.enableButton("NextButton"))}},PageTour.prototype.__blockNavigationToNextInstruction=function(){this.__blockNextInstruction=!0},PageTour.prototype.__unBlockNavigationToNextInstruction=function(){this.__blockNextInstruction=!1},PageTour.prototype.__isNavigationToNextInstructionAllowed=function(){return this.__blockNextInstruction},PageTour.prototype.pause=function(){"use strict";this.currentActiveInstruction&&(this.__blockNavigationToNextInstruction(),this.currentActiveInstruction.InstructionObject.hide(),this.__unBlockNavigationToNextInstruction())},PageTour.prototype.stop=function(){"use strict";if(this.currentActiveInstruction){this.__blockNavigationToNextInstruction(),this.currentActiveInstruction.InstructionObject.hide();var a=this.getPageInstructionsList().getFirstInstruction();this.currentActiveInstruction=a,this.enableButton("NextButton"),this.disableButton("PreviousButton")}this.hide()},PageTour.prototype.showInstruction=function(a){"use strict";var b=this.getPageInstructionsList().find(a);b&&b.show()},PageTour.prototype.getInstruction=function(a){"use strict";var b=this.getPageInstructionsList().find(a);return b},PageTour.prototype.showNextInstruction=function(){"use strict";if(this.currentActiveInstruction&&!this.__isNavigationToNextInstructionAllowed()){var a=this.currentActiveInstruction.nextInstruction;a?(a.InstructionObject.show(!0),this.enableButton("PreviousButton"),this.currentActiveInstruction=a):(this.showPlayButton(),this.currentActiveInstruction=null,this.disableButton("PreviousButton"),this.disableButton("NextButton"))}},PageTour.prototype.jumpToNextInstruction=function(){"use strict";if(this.currentActiveInstruction){this.__blockNavigationToNextInstruction(),this.currentActiveInstruction.InstructionObject.hide();var a=this.currentActiveInstruction.nextInstruction;a?(a.InstructionObject.show(!0),this.enableButton("PreviousButton"),this.currentActiveInstruction=a):(this.showPlayButton(),this.currentActiveInstruction=null,this.disableButton("PreviousButton"),this.disableButton("NextButton")),this.__unBlockNavigationToNextInstruction()}},PageTour.prototype.jumpToPreviousInstruction=function(){"use strict";if(this.currentActiveInstruction){var a=this.currentActiveInstruction.previousInstruction;a?(this.__blockNavigationToNextInstruction(),this.currentActiveInstruction.InstructionObject.hide(),a.InstructionObject.show(!0),this.enableButton("NextButton"),this.currentActiveInstruction=a,this.__unBlockNavigationToNextInstruction()):this.disableButton("PreviousButton")}},PageTour.prototype.__add=function(a){"use strict";var b=this;a.addEventListener("__on_show_next_instruction__",function(){b.showNextInstruction()}),this.getPageInstructionsList().add(a)},PageTour.prototype.removeInstruction=function(a){"use strict";var b=this.getPageInstructionsList().find(a);b&&(b.removeEventListener("__on_show_next_instruction__"),this.getPageInstructionsList().remove(b.ID))},PageTour.prototype.addInstruction=function(a){var b=new OverlayInstructions(a);this.__add(b),a.targetID&&this.addTarget(a.targetID,b)},PageTour.prototype.addTarget=function(a,b){var c,d,e=$("#"+a);if(e.length<=0)alert("Target Element with ID="+a+" not found !!");else{d=$('<a class="InstructionTriggerButton" style="position:absolute;" id="PageTour_'+this.name+"_InstructionTrigger_"+a+'"></a>'),c=this.getOverlay(),this.instructionTargets[a]=d,c.append(d),this.rePositionInstructionTarget(a);var f={OverlayInstructionObj:b,PageTourObj:this};$("#PageTour_"+this.name+"_InstructionTrigger_"+a).on("click",f,this.OnInstructionTriggerButtonClick)}},PageTour.prototype.OnInstructionTriggerButtonClick=function(a){"use strict";var b=a.data.OverlayInstructionObj,c=a.data.PageTourObj,d=c.getPageInstructionsList().find(b.getID());c.currentActiveInstruction=d,b.show(!0),c.showPauseButton()},PageTour.prototype.rePositionInstructionTarget=function(a){var b=this.instructionTargets[a],c=$("#"+a).offset(),d=c.left,e=c.top;b.css("left",d),b.css("top",e)},PageTour.prototype.rePositionAllInstructionTargets=function(){var a;for(a in this.instructionTargets)this.instructionTargets.hasOwnProperty(a)&&this.rePositionInstructionTarget(a)},PageTour.prototype.refreshPageTourLayout=function(){this.resizeOverlay(),this.rePositionAllInstructionTargets()},PageTour.prototype.getOverlay=function(){"use strict";var a;return a=this.pageTourOverlay?this.pageTourOverlay:this.createOverlay()},PageTour.prototype.resizeOverlay=function(){var a=this.getOverlay();a.height($(document).height()-1),a.width($(document).width()-1)},PageTour.prototype.createOverlay=function(){"use strict";var a=$("#PageTour_"+this.name+"_Overlay");return a.length<=0&&(a=$('<div class="PageTourOverlay '+this.instructionBlockTheme+'" id="PageTour_'+this.name+'_Overlay" style="display:none; height:'+$(document).height()+"px; width:"+$(document).width()+'px;"></div>'),$("body").append(a)),this.pageTourOverlay=a,a},PageTour.prototype.getNavigationButtons=function(){"use strict";var a;return a=this.tourNavigationButtons?this.tourNavigationButtons:this.createNavigationButtons()},PageTour.prototype.createNavigationButtons=function(){var a=$('<a class="PageTourNavigationButton PageTourPlayButton" style="display:block;float:left;" id="PageTour_'+this.name+'_PlayButton"></a>'),b=$('<a class="PageTourNavigationButton PageTourPauseButton" style="display:none;float:left;" id="PageTour_'+this.name+'_PauseButton"></a>'),c=$('<a class="PageTourNavigationButton PageTourStopButton" style="display:block;float:left;" id="PageTour_'+this.name+'_StopButton"></a>'),d=$('<a class="PageTourNavigationButton PageTourNextButton" style="display:none;float:left;" id="PageTour_'+this.name+'_NextButton"></a>'),e=$('<a class="PageTourNavigationButton PageTourPreviousButton" style="display:none;float:left;" id="PageTour_'+this.name+'_PreviousButton"></a>'),f=$('<div class="PageTourNavigationButtons '+this.instructionBlockTheme+'" style="display:none; position:fixed; bottom: 0; width: 100%;" id="PageTour_'+this.name+'_NavigationButtons"></div>');f.append(c),f.append(a),f.append(b),f.append(e),f.append(d),$("body").append(f),this.tourNavigationButtons=f;var g={PageTourObj:this};$("#PageTour_"+this.name+"_PlayButton").on("click",g,this.onPlayButtonClick),$("#PageTour_"+this.name+"_PauseButton").on("click",g,this.onPauseButtonClick),$("#PageTour_"+this.name+"_StopButton").on("click",g,this.onStopButtonClick),$("#PageTour_"+this.name+"_NextButton").on("click",g,this.onNextButtonClick),$("#PageTour_"+this.name+"_PreviousButton").on("click",g,this.onPreviousButtonClick)},PageTour.prototype.onPlayButtonClick=function(a){var b=a.data.PageTourObj;b.showPauseButton(),b.showNextPreviousButtons(),b.play()},PageTour.prototype.onPauseButtonClick=function(a){var b=a.data.PageTourObj;b.showPlayButton(),b.pause()},PageTour.prototype.onStopButtonClick=function(a){var b=a.data.PageTourObj;b.stop(),b.showPlayButton(),b.hideNextPreviousButtons()},PageTour.prototype.onNextButtonClick=function(a){var b=a.data.PageTourObj;b.showPauseButton(),b.jumpToNextInstruction()},PageTour.prototype.onPreviousButtonClick=function(a){var b=a.data.PageTourObj;b.showPauseButton(),b.jumpToPreviousInstruction()},PageTour.prototype.showPlayButton=function(){$("#PageTour_"+this.name+"_PlayButton").css("display","block"),$("#PageTour_"+this.name+"_PauseButton").css("display","none")},PageTour.prototype.showPauseButton=function(){$("#PageTour_"+this.name+"_PlayButton").css("display","none"),$("#PageTour_"+this.name+"_PauseButton").css("display","block")},PageTour.prototype.showNextPreviousButtons=function(){$("#PageTour_"+this.name+"_NextButton").css("display","block"),$("#PageTour_"+this.name+"_PreviousButton").css("display","block")},PageTour.prototype.hideNextPreviousButtons=function(){$("#PageTour_"+this.name+"_NextButton").css("display","none"),$("#PageTour_"+this.name+"_PreviousButton").css("display","none")},PageTour.prototype.disableNextPreviousButtons=function(){this.disableButton("NextButton"),this.disableButton("PreviousButton")},PageTour.prototype.enableNextPreviousButtons=function(){this.enableButton("NextButton"),this.enableButton("PreviousButton")},PageTour.prototype.disableButton=function(a){$("#PageTour_"+this.name+"_"+a).addClass("disabled")},PageTour.prototype.enableButton=function(a){$("#PageTour_"+this.name+"_"+a).removeClass("disabled")},PageTour.prototype.show=function(){this.refreshPageTourLayout();var a=this.getOverlay(),b=this.getNavigationButtons();a.css("display","block"),b.css("display","block"),this.__Is_Active__=!0},PageTour.prototype.hide=function(){var a=this.getOverlay(),b=this.getNavigationButtons();a.css("display","none"),b.css("display","none"),this.__unBlockNavigationToNextInstruction(),this.__Is_Active__=!1};